<!DOCTYPE html>
<head>

  <meta charset="utf-8">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.4.1.js"></script>

  <!-- Material Design Bootstrap -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.18.0/css/mdb.min.css" rel="stylesheet">
  <!-- Latest compiled JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Quicksand">
  <link rel="stylesheet" type= "text/css" href="css/style.css">

</head>

<style>

    h1{
        margin: 0;
        display: inline-block;
    }
    h2{
        text-align : center;
        font-size: 50px;
        padding-bottom: 5%;
    }
    .form-group{
        padding-left:10%;
    }

    body{
        background-color:#f2f2f2;
        font-size: 15px;
        font-family: 'Quicksand';
        color:#6B6B6B;
    }
</style>

<body>
    <!-- Navigation Bar -->
    <div class = "topnav">
        <a id="home" href = "list.html"><i class="glyphicon glyphicon-home"></i></a>
        <a id="logout" onclick="logout()">Logout</a>
    </div>


    <div class="jumbotron jumbotron-fluid">
        <div id = "main" class="container">
          <div class="row">
            <h1 class="col-8">Edit Your Event</h1> 
            <div class="col-4" style="display: flex; justify-content: flex-end;">
              <button type="button" class="myButton btn btn-success btn-circle btn-xl align-self-end" id="myBtn"> SAVE </button>
          </div>
      </div>
  </div>
</div>


<div class="container has-shadow" style="background-color: #ffffff;">
 <form action = "event.html" style="margin: 5% 5% 5% 5%">
  <div class="form-group row">
    <label for="eventname" class="col-md-2 col-form-label">Name</label>
    <div class="col-md-3">
      <input type="text" id = "eventname" class="form-control" id="eventname" placeholder="Name">
  </div>
</div>

<div class="form-group row">
    <label for="eventdescription" class="col-md-2 col-form-label">Description</label>
    <div class="col-md-8">
      <textarea class="form-control" id="eventdescription" rows="5"></textarea>
  </div>
</div>



<div class="form-group row">
    <label for="eventdate" class="col-md-2 col-form-label">Date</label>
    <div class="col-md-3">
      <div class='input-group date' id='datetimepicker'>
        <input type='text' id = "eventdate" class="form-control" />
        <span class="input-group-addon">
          <span class="glyphicon glyphicon-calendar" style="font-size: 20px"></span>
      </span>
      <script type="text/javascript">
          $(function () {
            $('#datetimepicker').datetimepicker();
        });
    </script>
</div>
</div>
</div>


<div class="form-group row">
    <label for="eventlocation" class="col-md-2 col-form-label">Location</label>
    <div class="col-md-3">
      <select class="form-control" id="eventlocation">
        <option>University Campus</option>
        <option>Outside Campus (City)</option>
        <option>Both</option>
    </select>
</div>

</div>
</form> 
<button onclick = "updateEvent()">Updaaaate</button>
<!-- End of Form -->
<!-- End of container -->
</div>
</div>
</div>
</div>
</div>
</div>


<script>
function updateEvent() {
	description = document.getElementById("eventdescription").value;
	eventId = window.location.search.split("=")[1];
	namestuff = document.getElementById("eventname").value;
	locationstuff = document.getElementById("eventlocation");
	eventloc = locationstuff.options[locationstuff.selectedIndex].value
	eventdate = document.getElementById("eventdate").value;
	eventjson = {"createdBy":"CreaJoep", "description":description, "eventId":eventId,"lastEditedBy":"EditJoep", "location":eventloc, "name":namestuff};
	console.log(JSON.stringify(eventjson));
	var xhr = new XMLHttpRequest();
	xhr.open('PUT', "http://localhost:8080/kickInTeam26/rest/event/" + eventId, true);
	xhr.onreadystatechange = function() {
		if ((xhr.readyState == 4) && (xhr.status = 200)) {
			console.log(xhr.responseText);
			window.location.href = "http://localhost:8080/kickInTeam26/event.html?id=" + eventId;
		}
	}
	xhr.setRequestHeader("Content-Type", "application/json");
	xhr.send(JSON.stringify(eventjson));
}
</script>



<script>
    function logout(){
        const xhr = new XMLHttpRequest();
        xhr.open('DELETE', "http://localhost:8080/kickInTeam26/rest/authentication", true);
        xhr.onreadystatechange = function () {
            if (xhr.readyState == 4) {
                console.log(xhr.responseText);
                window.location.href="http://localhost:8080/kickInTeam26/login.html";
            }
        }
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.send();
    }
</script>

<script>
function updateEvent() {
	description = document.getElementById("eventdescription").value;
	eventId = window.location.search.split("=")[1];
	namestuff = document.getElementById("eventname").value;
	locationstuff = document.getElementById("eventlocation");
	eventloc = locationstuff.options[locationstuff.selectedIndex].value
	eventdate = document.getElementById("eventdate").value;
	eventjson = {"createdBy":"CreaJoep", "description":description, "eventId":eventId,"lastEditedBy":"EditJoep", "location":eventloc, "name":namestuff};
	console.log(JSON.stringify(eventjson));
	var xhr = new XMLHttpRequest();
	xhr.open('PUT', "http://localhost:8080/kickInTeam26/rest/event/" + eventId, true);
	xhr.onreadystatechange = function() {
		if ((xhr.readyState == 4) && (xhr.status = 200)) {
			console.log(xhr.responseText);
			window.location.href = "http://localhost:8080/kickInTeam26/event.html?id=" + eventId;
		}
	}
	xhr.setRequestHeader("Content-Type", "application/json");
	xhr.send(JSON.stringify(eventjson));
}
</script>





</body>

</html>