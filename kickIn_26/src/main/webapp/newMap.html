<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Add a new Map</title>
</head>
<body>

<label for="mapName">Map Name:</label>
<input id="mapName">

<label for="description">Description: </label>
<input id="description">
<button onclick="addNewMap();">Submit</button>

</body>
<script>

    function addNewMap() {
        let mapName = document.getElementById("mapName").value;
        let description = document.getElementById("description").value;

        let createMap = new XMLHttpRequest();
        let mapId;
        let eventId = 2;

        createMap.onreadystatechange = function() {
            if(this.readyState === 4 && this.status === 200) {

                mapId = parseInt(createMap.responseText);
                let createMapRelation = new XMLHttpRequest();
                createMapRelation.onreadystatechange = function() {
                    if (createMapRelation.readyState === 4 && createMapRelation.status === 200) {
                        console.log(createMapRelation.responseText);
                    }
                }
                createMapRelation.open("POST", ("http://localhost:8080/kickInTeam26/rest/eventMap"));
                createMapRelation.send('{"eventId":"'+eventId+'","mapId":"'+mapId+'"}')

            } else {
                throw new Error("something not correct");
            }
        }
        createMap.open("POST", ("http://localhost:8080/kickInTeam26/rest/maps"));
        createMap.send('{"name:"'+mapName+'","description:"'+description+'"}');
    }

</script>
</html>