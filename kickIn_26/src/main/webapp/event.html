<!DOCTYPE html>
<html lang="en">
<head>

	<meta charset="utf-8">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">

	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
	<!-- jQuery library -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.4.1.js"></script>

	<!-- Material Design Bootstrap -->
	<link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.18.0/css/mdb.min.css" rel="stylesheet">
	<!-- Latest compiled JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Quicksand">
	<link rel="stylesheet" type= "text/css" href="css/style.css">

</head>

<style>


	h2{
		text-align : center;
		font-size: 50px;
		padding-bottom: 5%;
	}

	.glyphicon {
		font-size:20px;
		color:#00CC33;
	}

	body{
		background-color:#f2f2f2;
		font-size: 15px;
		font-family: 'Quicksand';
		color:#6B6B6B;
	}

</style>

<body>


<!-- Navigation Bar -->
<div class = "topnav">
	<a id="home" class="glyphicon glyphicon-home" href = "list.html"></a>
	<a id="logout" onclick="logout()">Logout</a>
</div>

<!-- Edit Your Event -->
<div class="jumbotron jumbotron-fluid">
	<div id = "main" class="container">
		<div class="row">
			<h1 class="col-8">Event</h1>
			<div class="col-4" style="display: flex; justify-content: flex-end;">
				<a id = "editlink" href="edit.html"><button type="button" class="myButton btn btn-success btn-circle btn-xl align-self-end"> + </button></a>
			</div>
		</div>
	</div>
</div>

<!-- Container For Event Descriptions -->
<div class="container">
	<div class="shadow-lg p-3 mb-5 bg-white rounded">
		<div class="row">
			<div class="col-md-6 col-sm-7 col-lg-5 d-flex justify-content-between">
				<h1 id = "eventname" class="text-left">Epic_Event_1
					<a href="#" class="glyphicon glyphicon-share"></a>
					<a href="edit.html" class="glyphicon glyphicon-pencil"></a>
					<a href="#" class="glyphicon glyphicon-trash" id="deleteEvent"></a>
				</h1>

			</div>
		</div>
		<div id="intro">
			<p id = "introtext" style="text-align:justify;">Paragraphs are the building blocks of papers. Many students
				define paragraphs in terms of length: a paragraph is a group of at
				least five sentences, a paragraph is half a page long, etc. In
				reality, though, the unity and coherence of ideas among sentences
				is what constitutes a paragraph. A paragraph is defined as “a group
				of sentences or a single sentence that forms a unit” (Lunsford and
				Connors 116).</p>

			<a href="list.html" class="glyphicon glyphicon-calendar"></a><label id = "eventdate">01/01/2020</label>
			<a href="list.html" class="glyphicon glyphicon-time"></a><label id = "eventtime">4:20AM</label>
			<a href="list.html" class="glyphicon glyphicon-map-marker"></a><label id = "eventlocation">University of Twente</label>

		</div>
	</div>
</div>

<!-- Container for Map #1 (Stub) -->
<div class="container">
	<div class="shadow-lg p-3 mb-5 bg-white rounded">
		<div class="row" style="justify-content: center;">

			<!-- Map API -->
			<div class="col-md-6" style="display:flex;justify-content:center;align-items: center;">
				<iframe
						src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d78211.4516027429!2d6.798508172117513!3d52.22325812228936!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47b8139482fe5187%3A0xd24e1fb7ad7265e2!2sEnschede%2C%20Netherlands!5e0!3m2!1sen!2sro!4v1590396419471!5m2!1sen!2sro"
						width="400" height="300" frameborder="0"
						style="border: 0;"
						allowfullscreen="" aria-hidden="false" tabindex="0"></iframe>
			</div>

			<!-- Name of Map, Creator and description of the map -->
			<div class="col-md-5">

				<div class="row">
					<h1 class="text-left">Name_Of_Map
						<a href="mapView.html" class="glyphicon glyphicon-eye-open text-success" style="font-size:20px;"></a>
						<a href="mapEdit.html" class="text-success"><i class="glyphicon glyphicon-pencil" style="font-size:20px;"></i></a>
						<a class="text-success" id="deleteMap"><i class="glyphicon glyphicon-trash" style="font-size:20px;"></i></a>
					</h1>
				</div>

				<div class="row">
					<h4 style="float: left">Created by :
						<a class="icon" href="#"><i
								class="glyphicon glyphicon-user text-success" style="font-size:20px;"></i></a><label>The
							Creator </label></h4>
				</div>
				<div class="row">
					<p style="font-size: 15px;text-align:justify">Paragraphs are the building blocks of
						papers. Many students define paragraphs in terms of length: a
						paragraph is a group of at least five sentences, a paragraph is half
						a page long, etc. In reality, though, the unity and coherence of
						ideas among sentences is what constitutes a paragraph. A paragraph
						is defined as “a group of sentences or a single sentence that forms
						a unit” (Lunsford and Connors 116). Length and appearance do not
						determine whether a section in a paper is a paragraph. For instance,
						in some styles of writing, particularly journalistic styles, a
						paragraph can be just one sentence long. Ultimately, a paragraph is
						a sentence or group of sentences that support one main idea. In this
						handout, we will refer to this as the “controlling idea,” because it
						controls what happens in the rest of the paragraph.</p>

				</div>
			</div>

		</div>
	</div>
	
</div>
<div>
<button onclick = "getMaps()">MAPS</button>
</div>
<!-- The Event Deletion Popup -->
<div id="popupEventDelete" class="modal">

	<!-- Popup content -->
	<div class="modal-content">
		<span class="close">&times;</span>
		<h2>Do you really want to delete this event?</h2>
		<div class="bottomright" style="display: flex; justify-content: center;">
			<button type="submit" class="btn btn-success btn-circle btn-xl align-self-center">YES</button>
			<button type="submit" class="btn btn-success btn-circle btn-xl align-self-center">NO</button>
		</div>
	</div>
</div>

<!-- The Map Deletion Popup -->
<div id="popupMapDelete" class="modal">

	<!-- Popup content -->
	<div class="modal-content">
		<span class="close">&times;</span>
		<h2>Do you really want to delete this map?</h2>
		<div class="bottomright" style="display: flex; justify-content: center;">
			<button type="submit" class="btn btn-success btn-circle btn-xl align-self-center">YES</button>
			<button type="submit" class="btn btn-success btn-circle btn-xl align-self-center">NO</button>
		</div>
	</div>
</div>

<script>

	// Get the modal
	var modal = document.getElementById("popupEventDelete");
	var modal1 = document.getElementById("popupMapDelete");

	// Get the button that opens the modal
	var btn = document.getElementById("deleteEvent");
	var btn1 = document.getElementById("deleteMap");

	// Get the <span> element that closes the modal
	var span = document.getElementsByClassName("close")[0];


	// When the user clicks the button, open the modal
	btn.onclick = function() {
		modal.style.display = "block";
	}

	btn1.onclick = function() {
		modal1.style.display = "block";
	}

	// When the user clicks on <span> (x), close the modal
	span.onclick = function(event) {
		if (event.target === modal) {
			modal.style.display = "none";
		} else if (event.target === modal1) {
			modal1.style.display = "none";
		}
	}

	// When the user clicks anywhere outside of the modal, close it
	window.onclick = function(event) {
		if (event.target === modal) {
			modal.style.display = "none";
		} else if (event.target === modal1) {
			modal1.style.display = "none";
		}
	}

	//  javascript from Joep
	function getMaps() {
		var id = window.location.search.split("=")[1];
		const xhr = new XMLHttpRequest();
		xhr.open('GET', "http://localhost:8080/kickInTeam26/rest/eventMap/event/" + id, true);
		xhr.onreadystatechange = function () {
			if (xhr.readyState === 4) {
				console.log(xhr.responseText);
			}
		}
		xhr.setRequestHeader("Content-Type", "application/json");
		xhr.send();

	}

	window.onload = function() {
		var id = window.location.search.split("=")[1];
//	console.log(id);
		const xhr = new XMLHttpRequest();
		xhr.open('GET', "http://localhost:8080/kickInTeam26/rest/event/" + id, true);
		xhr.onreadystatechange = function () {
			if (xhr.readyState === 4) {
				var event = JSON.parse(xhr.responseText);
				console.log(event);
   				document.getElementById("introtext").innerHTML = event.description;
   				document.getElementById("eventlocation").innerHTML = event.location;
   				document.getElementById("eventname").innerHTML = event.name;
   				document.getElementById("editlink").href = "http://localhost:8080/kickInTeam26/edit.html?id=" + id;
			}
		}
		xhr.setRequestHeader("Content-Type", "application/json");
		xhr.send();
	}

	function logout(){
		const xhr = new XMLHttpRequest();
		xhr.open('DELETE', "http://localhost:8080/kickInTeam26/rest/authentication", true);
		xhr.onreadystatechange = function () {
			if (xhr.readyState == 4) {
				console.log(xhr.responseText);
				window.location.href="http://localhost:8080/kickInTeam26/login.html";
			}
		}
		xhr.setRequestHeader("Content-Type", "application/json");
		xhr.send();
	}

</script>

</body>
</html>

